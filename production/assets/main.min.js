/*!
Sunil Patel, Developer, POV Digital | github.com/povdocs/pov-mobile-storytelling
Copyright (C) 2016 POV | American Documentary Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
function createCORSRequest(e,t){var o=new XMLHttpRequest;return"withCredentials"in o?o.open(e,t,!0):"undefined"!=typeof XDomainRequest?(o=new XDomainRequest,o.open(e,t)):o=null,o}function AssetManager(){this.DEBUG=!1,this.successCount=0,this.errorCount=0,this.cache={},this.downloadQueue=[],this.inQueue={}}AssetManager.prototype.queueDownload=function(e){this.downloadQueue.push(e)},AssetManager.prototype.constructor=function(e,t){"undefined"!=typeof e&&(this.downloadQueue=e),0===this.downloadQueue.length&&"undefined"!=typeof t&&t();for(var o=this,n=0;n<this.downloadQueue.length;n++){var a=this.downloadQueue[n];if("image"==a.type)this.downloadImage(a.path,function(e,n){o.cache[e]=n,o.isDone()&&t()});else if("audio"==a.type)this.downloadAudio(a.path,function(e,n){o.cache[e]=n,o.isDone()&&t()});else{if("video"!=a.type)continue;this.downloadVideo(a.path,function(e,n){o.cache[e]=n,o.isDone()&&t()})}}},AssetManager.prototype.downloadImage=function(e,t){var o=new Image,n=this;n.DEBUG&&console.log("IMAGE DOWNLOADING: ",e),o.addEventListener("progress",function(t){n.progressCount(e,t.loaded,t.total)}),o.addEventListener("load",function(){n.successCount+=1,n.DEBUG&&console.log("IMAGE DOWNLOADED: ",e),t(e,o)},!1),o.addEventListener("error",function(t){n.errorCount+=1,n.DEBUG&&console.error("ERROR DOWNLOADING IMAGE: ",e,t)},!1),o.src=e},AssetManager.prototype.downloadAudio=function(e,t){var o=new Audio,n=this,a=createCORSRequest("GET",e);if(!a)throw new Error("CORS not supported");n.DEBUG&&console.log("AUDIO DOWNLOADING: ",e),a.responseType="blob",a.addEventListener("progress",function(t){n.progressCount(e,t.loaded,t.total)}),a.addEventListener("load",function(){n.DEBUG&&console.log("AUDIO DOWNLOADED: ",e),n.successCount+=1,window.URL=window.URL||window.webkitURL,o=window.URL.createObjectURL(this.response),t(e,o)},!1),a.addEventListener("error",function(t){n.errorCount+=1,n.DEBUG&&console.error("ERROR DOWNLOADING AUDIO: ",e,t)},!1),a.send()},AssetManager.prototype.downloadVideo=function(e,t){var o=null,n=this,a=createCORSRequest("GET",e);if(!a)throw new Error("CORS not supported");n.DEBUG&&console.log("VIDEO DOWNLOADING: ",e),a.responseType="blob",a.addEventListener("progress",function(t){n.progressCount(e,t.loaded,t.total)}),a.addEventListener("load",function(){n.DEBUG&&console.log("VIDEO DOWNLOADED: ",e),n.successCount+=1,window.URL=window.URL||window.webkitURL,o=window.URL.createObjectURL(this.response),t(e,o)},!1),a.addEventListener("error",function(t){n.errorCount+=1,n.DEBUG&&console.error("ERROR DOWNLOADING VIDEO: ",e,t)},!1),a.send()},AssetManager.prototype.isDone=function(){return!(this.progress()<100)},AssetManager.prototype.progress=function(){var e=0,t=0;for(var o in this.inQueue)this.inQueue.hasOwnProperty(o)&&(e+=this.inQueue[o].progress,t+=this.inQueue[o].total);return Math.round(e/t*100)},AssetManager.prototype.getAsset=function(e){return this.cache.hasOwnProperty(e)?this.cache[e]:e},AssetManager.prototype.updateProgress=function(e,t){if(t.lengthComputable){var o=t.loaded/t.total;parentThis.DEBUG&&console.log(e,o)}},AssetManager.prototype.progressCount=function(e,t,o){this.inQueue[e]={progress:event.loaded,total:event.total}};/*!
Sunil Patel, Developer, POV Digital | github.com/povdocs/pov-mobile-storytelling
Copyright (C) 2016 POV | American Documentary Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var ua=window.navigator.userAgent,platform=window.navigator.platform,mobile=0,browser,version,os,osversion,bit;/MSIE/.test(ua)?(browser="Internet Explorer",version=/MSIE \d+[.]\d+/.exec(ua)[0].split(" ")[1],/IEMobile/.test(ua)&&(mobile=1)):/CriOS/.test(ua)?(browser="Chrome",version=/CriOS\/[\d\.]+/.exec(ua)[0].split("/")[1],os="iOS",mobile=1,/iPhone/.test(ua)&&(platform="iPhone"),/iPad/.test(ua)&&(platform="iPad"),/iPod/.test(ua)&&(platform="iPod")):/Chrome/.test(ua)?(browser="Chrome",version=/Chrome\/[\d\.]+/.exec(ua)[0].split("/")[1],/CrOS/.test(ua)&&(platform="CrOS")):/Firefox/.test(ua)?(browser="Firefox",version=/Firefox\/[\.\d]+/.exec(ua)[0].split("/")[1],/Fennec/.test(ua)&&(mobile=1)):/Opera/.test(ua)?(browser="Opera",(/mini/.test(ua)||/Mobile/.test(ua))&&(mobile=1)):/Android/.test(ua)?(browser="Android Webkit Browser",os=/Android\s[\.\d]+/.exec(ua)[0],mobile=1):/Safari/.test(ua)&&(browser="Safari",version=/Version\/[\.\d]+/.exec(ua)[0].split("/")[1],/iPhone/.test(ua)&&(platform="iPhone"),/iPad/.test(ua)&&(platform="iPad"),/iPod/.test(ua)&&(platform="iPod")),version||(version=/Version\/[\.\d]+/.exec(ua),version=version?version[0].split("/")[1]:/Opera\/[\.\d]+/.exec(ua)[0].split("/")[1]),"iPhone"===platform||"iPad"===platform||"iPod"===platform?(os="iOS",mobile=1,osversion=/OS\s[\_\d]+/.exec(ua)[0].split(" ")[1].replace(/_/g,".")):"MacIntel"===platform||"MacPPC"===platform?(os="Mac OS X",osversion=/10[\.\_\d]+/.exec(ua),osversion&&(osversion=osversion[0],/[\_]/.test(osversion)&&(osversion=osversion.split("_").join(".")))):"CrOS"===platform?os="ChromeOS":"Win32"===platform||"Win64"===platform?(os="Windows",bit=platform.replace(/[^0-9]+/,"")):!os&&/Android/.test(ua)?os="Android":!os&&/Linux/.test(platform)?os="Linux":!os&&/Windows/.test(ua)&&(os="Windows"),window.device={mobile:mobile,browser:browser,version:version,os:os,osversion:osversion,bit:bit,platform:platform};/*!
Sunil Patel, Developer, POV Digital | github.com/povdocs/pov-mobile-storytelling
Copyright (C) 2016 POV | American Documentary Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var app={DEBUG:!1,snapFile:"assets/snap.json",assetManager:new AssetManager,touchX:null,touchY:null,currentScroll:0,currentSnap:0,assets:[],allAssets:[],data:[],snaps:[],startedTF:!1,loadedTF:!1,downloadTF:!1,title:document.title,width:$("main").width(),height:$("main").height(),swipeThreshold:6,cacheCover:!0,casheContent:!1,touchThreshold:40,transitionSpeed:600,introLogo:"assets/media/pov-logo-web-transparent-bg-white-text.svg",introTitle:"Mobile Story Telling",defaultIntroImg:"assets/media/default-intro-cover.jpg",iosLessThen10:"For better experience please view this on iOS 10.",iosChromeLessThen54:"For better experience please view this on Safari in iOS 10.",init:function(){if(app.assetManager.DEBUG=app.DEBUG,app.readFile(app.downloadAssets),window.device){var e=window.device.os.replace(/\s/g,"");$("body").addClass(e.toLowerCase()),$("body").addClass(window.device.browser.toLowerCase()),$("body").addClass(window.device.platform.toLowerCase())}"standalone"in window.navigator&&window.navigator.standalone&&$("body").addClass("fullscreen"),app.snap.howTo(),$("#how-to-close").on("click",function(){$("#how-to").animate({top:"-110%"},app.transitionSpeed,function(){$(this).hide()})})},readFile:function(e){$.getJSON(app.snapFile,function(t){app.data=t;for(var o=0,n=null,a=t.length;o<a;o++)n=t[o],0===o&&n.cover&&(n.cover.image||(n.cover.image=app.defaultIntroImg),$("#launcher").css({"background-image":"url('"+n.cover.image+"')"})),n.cover&&app.cacheCover&&(n.cover.image&&app.addAssetManager("image",n.cover.image),n.cover.audio&&app.addAssetManager("audio",n.cover.audio),n.cover.video&&app.addAssetManager("video",n.cover.video)),n.content&&app.casheContent&&"video"==n.content.type&&app.addAssetManager("video",n.content.src),o==a-1&&e()})},addAssetManager:function(e,t){var o=app.assets.indexOf(t);return o<0?(app.allAssets.push({type:e,path:t}),app.assets.push(t),app.allAssets.length-1):o},downloadAssets:function(){app.assetManager.constructor(app.allAssets,function(){for(var e=0,t=null,o=app.data.length;e<o;e++)t=app.data[e],t.cover&&app.cacheCover&&(t.cover.audio&&(t.cover.audio=app.assetManager.getAsset(t.cover.audio)),t.cover.video&&(t.cover.video=app.assetManager.getAsset(t.cover.video))),t.content&&app.casheContent&&"video"==t.content.type&&(t.content.src=app.assetManager.getAsset(t.content.src));app.start()});var e=setInterval(function(){var t=app.assetManager.progress();t<100?($("#progress-bar").css({width:t+"%"}),document.title=t+"% | "+app.title):(clearInterval(e),app.downloadTF=!0,document.title=app.title)},1e3)},start:function(){if(!app.loadedTF)for(var e=0,t=app.data.length;e<t;e++)app.snap.create(e,app.data[e]),e==t-1&&(app.loadedTF=!0);var o=setInterval(function(){app.loadedTF&&app.downloadTF&&($("#launcher").hide(),app.eventListener(),app.snap.init(),app.snap.play(app.snap.getCurrent()),clearInterval(o))},1e3)},eventListener:function(){$(document).on("touchmove",function(e){var t=app.snap.getCurrent();$(t.content).hasClass("html")||e.preventDefault()}),$("#intro-play").on("click",function(){if(!app.startedTF){app.toggleFullScreen(),app.startedTF=!0;for(var e=0,t=null,o=app.snaps.length;e<o;e++)t=app.snaps[e],t.video&&app.preload(t.video),t.audio&&app.preload(t.audio),t.contentVideo&&app.preload(t.contentVideo)}app.snap.next()}),$("video,audio").bind("abort",function(e){app.DEBUG&&console.log(this.currentSrc,"abort function fired"),this.controls=!0}).bind("emptied",function(e){app.DEBUG&&console.log(this.currentSrc,"emptied function fired"),this.controls=!0}).bind("error",function(e){app.DEBUG&&console.log(this.currentSrc,"error function fired"),this.controls=!0}).bind("stalled",function(e){app.DEBUG&&console.log(this.currentSrc,"stalled function fired"),this.controls=!0}).bind("ended",function(e){app.DEBUG&&console.log(this.currentSrc,"ended function fired"),this.loop||(this.controls=!0)}).bind("pause",function(e){app.DEBUG&&console.log(this.currentSrc,"pause function fired"),this.volume=0}).bind("play",function(e){app.DEBUG&&console.log(this.currentSrc,"play function fired"),this.volume=1,this.tagName&&"VIDEO"===this.tagName&&$("body").hasClass("iphone")&&$("body").hasClass("ios")&&$(this).attr("style","height: "+$("main").height()+"px")}).bind("playing",function(e){app.DEBUG&&console.log(this.currentSrc,"playing function fired"),$(this).parent().hasClass("snap-cover")&&(this.controls=!1)}),$(document).on("keydown",function(e){37==e.keyCode?app.snap.previous():38==e.keyCode?app.snap.cover.show(!0):39==e.keyCode?app.snap.next():40==e.keyCode&&app.snap.content.show()})},getScroll:function(){var e=app.currentScroll,t=$("main").width();return e=e<0?0:e,e%t!==0&&(e-=e%t),e},stopMedia:function(e){return!!e&&(e.pause(),void(e.currentTime=0))},playMedia:function(e){return!!e&&void e.play()},preload:function(e){return!!e&&(e.load(),e.play(),e.pause(),void(e.currentTime=0))},toggleFullScreen:function(){var e=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}};/*!
Sunil Patel, Developer, POV Digital | github.com/povdocs/pov-mobile-storytelling
Copyright (C) 2016 POV | American Documentary Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
app.snap={init:function(){app.snap.cover.eventListeners(),app.snap.content.eventListeners()},howTo:function(){var e=document.getElementById("main"),t=document.createElement("div");t.setAttribute("class","how-to"),t.setAttribute("id","how-to");var o=document.createElement("div");o.setAttribute("id","how-to-close"),o.setAttribute("class","how-to-close");var n=document.createElement("img");if(n.setAttribute("class","how-to-image"),n.setAttribute("src","assets/media/mobile-storytelling-how-to.svg"),n.setAttribute("alt","Mobile Storytelling How To"),n.setAttribute("width","200"),n.setAttribute("height","auto"),t.appendChild(o),"device"in window&&window.device){var a=document.createElement("div");a.setAttribute("class","how-to-message"),"ios"==window.device.os.toLowerCase()&&(parseInt(window.device.osversion)<10?(a.innerHTML=app.iosLessThen10,t.appendChild(a)):"chrome"==window.device.browser.toLowerCase()&&parseInt(window.device.version)<54&&(a.innerHTML=app.iosChromeLessThen54,t.appendChild(a)))}t.appendChild(n),e.appendChild(t)},create:function(e,t){var o=document.getElementById("main"),n="",a={video:null,audio:null,image:null,cover:null,content:null,contentVideo:null};if(n=document.createElement("section"),n.setAttribute("class",0===e?"intro":"snap"),n.setAttribute("id","snap"+e),0===e){if(t.cover.image)n.setAttribute("style","background-image: url('"+t.cover.image+"')");else{var s=document.createElement("img");s.setAttribute("src",app.introLogo),s.setAttribute("alt","POV Logo"),s.setAttribute("width","200"),s.setAttribute("height","auto"),s.setAttribute("class","intro-pov-logo");var i=document.createElement("h1");i.setAttribute("class","intro-title"),i.innerHTML=app.introTitle,n.appendChild(s),n.appendChild(i)}var r=document.createElement("button");r.setAttribute("type","button"),r.setAttribute("id","intro-play"),r.setAttribute("class","intro-play-btn"),r.innerHTML="Start",n.appendChild(r)}else{var p=document.createElement("div");if(p.setAttribute("class","snap-cover"),t.cover.video){var c=document.createElement("video");c.setAttribute("playsinline",!0),c.setAttribute("webkit-playsinline",!0),c.setAttribute("src",t.cover.video),c.setAttribute("preload","metadata"),c.setAttribute("loop",!0),c.setAttribute("controls",!1),c.setAttribute("class","snap-cover-video"),p.appendChild(c),a.video=c}else{if(t.cover.image){var l=document.createElement("img");l.setAttribute("src",t.cover.image),l.setAttribute("alt",""),l.setAttribute("width","100%"),l.setAttribute("height",""),l.setAttribute("class","snap-cover-image"),p.appendChild(l),a.image=l}if(t.cover.audio){var u=document.createElement("audio");u.setAttribute("src",t.cover.audio),u.setAttribute("preload","metadata"),u.setAttribute("loop",!0),u.setAttribute("controls",!1),u.setAttribute("class","snap-cover-audio"),p.appendChild(u),a.audio=u}}if(n.appendChild(p),a.cover=p,e>0&&""!==t.content.type&&""!==t.content.src){var d=document.createElement("article");if(d.setAttribute("class","snap-content "+t.content.type),"html"==t.content.type&&(d.innerHTML=t.content.src),"video"==t.content.type){var h=document.createElement("video");h.setAttribute("playsinline",!0),h.setAttribute("webkit-playsinline",!0),h.setAttribute("src",t.content.src),h.setAttribute("preload","metadata"),h.setAttribute("loop",!1),h.setAttribute("controls",!0),h.setAttribute("class","snap-content-video"),d.appendChild(h),a.contentVideo=h}n.appendChild(d),t.content.type&&($(n).addClass("content-more"),$(n).addClass(t.content.type)),a.content=d}}o.appendChild(n),app.snaps.push(a)},getCurrent:function(){return app.currentSnap<0&&(app.currentSnap=0),app.snap.get(app.currentSnap)},get:function(e){return e<0||e>app.snaps.length?null:app.snaps[e]},next:function(){var e=app.width,t=$("section.snap").length,o=app.getScroll()+e;app.snap.cover.show(!1),o<=e*t&&$("main").stop().animate({scrollLeft:o},app.transitionSpeed,function(){var t=o/e;app.currentScroll=o,app.currentSnap=t,app.snap.stop(app.snap.get(t-1)),app.snap.play(app.snap.get(t))})},previous:function(){var e=app.width,t=app.getScroll()-e;app.snap.cover.show(!1),t>=0&&$("main").stop().animate({scrollLeft:t},app.transitionSpeed,function(){var o=t/e;app.currentScroll=t,app.currentSnap=o,app.snap.stop(app.snap.get(o+1)),app.snap.play(app.snap.get(o))})},play:function(e){return!!e&&void(e.video?app.playMedia(e.video):e.audio&&app.playMedia(e.audio))},stop:function(e){return!!e&&void(e.video?app.stopMedia(e.video):e.audio&&app.stopMedia(e.audio))},content:{show:function(){var e=app.snap.getCurrent();return!(!e.content||$(e.cover).hasClass("over"))&&($(e.cover).animate({top:"-110%"},app.transitionSpeed,function(){$(this).addClass("over")}),app.snap.stop(e),void(e.contentVideo&&app.playMedia(e.contentVideo)))},stop:function(e){return e||(e=app.snap.getCurrent()),!!e.content&&void $(e.content).find("video,audio").each(function(){app.stopMedia(this)})},eventListeners:function(){$(".snap-content").on("touchstart",function(e){app.startedTF&&(app.touchX=e.originalEvent.touches[0].clientX,app.touchY=e.originalEvent.touches[0].clientY,app.mainScroll=app.getScroll())}).on("touchmove",function(e){if(app.touchX||app.touchY){var t=app.touchX-e.originalEvent.touches[0].clientX,o=app.touchY-e.originalEvent.touches[0].clientY;if(Math.abs(t)>Math.abs(o))$("main").scrollLeft(app.getScroll()+t);else{var n=app.snap.getCurrent();n.content&&$(n.cover).hasClass("over")&&o<0&&0===$(n.content).scrollTop()&&(o=(o+$("main").height())/$("main").height()*100,$(n.cover).css({top:o*-1+"%"}))}}}).on("touchend",function(e){if(app.touchX||app.touchY){var t=app.touchX-e.originalEvent.changedTouches[0].clientX,o=app.touchY-e.originalEvent.changedTouches[0].clientY;console.log(t,o,app.touchX,app.touchY,e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY),app.touchX=null,app.touchY=null,Math.abs(t)<app.touchThreshold&&$("main").scrollLeft(app.mainScroll),app.mainScroll=null,app.snap.content.swipe(t,o,$(this).scrollTop())}})},swipe:function(e,t,o){e&&t&&(Math.abs(e)>Math.abs(t)?e<0?e<-Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("content swipe left"),app.snap.previous()):e>Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("content swipe right"),app.snap.next()):t<0?t<-Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("content swipe up"),o<2&&app.snap.cover.show(!0)):t>Math.abs(app.swipeThreshold)&&app.DEBUG&&console.log("content swipe down"))}},cover:{show:function(e){var t=app.snap.getCurrent();$(t.cover).hasClass("over")&&(t.content?(app.snap.content.stop(t),$(t.content).stop().animate({scrollTop:0},app.transitionSpeed),$(t.cover).animate({top:"0%"},app.transitionSpeed,function(){$(this).removeClass("over").removeAttr("style")})):$(t.cover).removeAttr("style").removeClass("over"),console.log("show cover: ",e),e===!0&&app.snap.play(t))},eventListeners:function(){$(".snap-cover").on("touchstart",function(e){app.startedTF&&(app.touchX=e.originalEvent.touches[0].clientX,app.touchY=e.originalEvent.touches[0].clientY,app.mainScroll=app.getScroll())}).on("touchmove",function(e){if(app.touchX&&app.touchY){var t=app.touchX-e.originalEvent.touches[0].clientX,o=app.touchY-e.originalEvent.touches[0].clientY;if(Math.abs(t)>Math.abs(o))$("main").scrollLeft(app.getScroll()+t);else{var n=app.snap.getCurrent();n.content&&!$(n.cover).hasClass("over")&&o>0&&(o=o/$("main").height()*100,$(n.cover).css({top:o*-1+"%"}))}e.preventDefault()}}).on("touchend",function(e){if(app.touchX||app.touchY){var t=app.touchX-e.originalEvent.changedTouches[0].clientX,o=app.touchY-e.originalEvent.changedTouches[0].clientY;if(console.log(t,o,app.touchX,app.touchY,e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY),app.touchX=null,app.touchY=null,Math.abs(t)<app.touchThreshold&&$("main").scrollLeft(app.mainScroll),Math.abs(o)<app.touchThreshold){var n=app.snap.getCurrent();$(n.cover).animate({top:"0%"},app.transitionSpeed,function(){$(this).removeAttr("style").removeClass("over")})}app.mainScroll=null,app.snap.cover.swipe(t,o)}})},swipe:function(e,t){(e||t)&&(console.log(e,t),Math.abs(e)>Math.abs(t)?e<0?e<-Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("swipe left"),app.snap.previous()):e>Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("swipe right"),app.snap.next()):t<0?t<-Math.abs(app.swipeThreshold)&&app.DEBUG&&console.log("swipe up"):t>Math.abs(app.swipeThreshold)&&(app.DEBUG&&console.log("swipe down"),app.snap.content.show()))}}},/*!
Sunil Patel, Developer, POV Digital | github.com/povdocs/pov-mobile-storytelling
Copyright (C) 2016 POV | American Documentary Inc.

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
$(document).ready(function(){app.init()});
//# sourceMappingURL=main.min.js.map
