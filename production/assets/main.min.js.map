{"version":3,"sources":["0.assetManager.js","1.app.js","2.snap.js","9.main.js"],"names":["createCORSRequest","method","url","xhr","XMLHttpRequest","open","XDomainRequest","AssetManager","this","DEBUG","successCount","errorCount","cache","downloadQueue","inQueue","prototype","queueDownload","path","push","constructor","queue","downloadCallback","length","parentThis","i","obj","type","downloadImage","result","isDone","downloadAudio","downloadVideo","image","Image","console","log","addEventListener","event","progressCount","loaded","total","e","error","src","audio","Audio","Error","responseType","window","URL","webkitURL","createObjectURL","response","send","video","progress","key","hasOwnProperty","Math","round","getAsset","updateProgress","oEvent","lengthComputable","percentComplete","app","snapFile","assetManager","touchX","touchY","currentScroll","currentSnap","assets","allAssets","data","snaps","startedTF","loadedTF","title","document","width","$","swipeThreshold","cacheCover","casheContent","touchThreshold","transitionSpeed","init","readFile","downloadAssets","ui","os","replace","addClass","toLowerCase","browser","navigator","standalone","callback","getJSON","d","l","cover","addAssetManager","content","index","indexOf","start","progressState","setInterval","css","clearInterval","snap","create","time","hide","eventListener","play","getCurrent","on","hasClass","preventDefault","toggleFullScreen","preload","contentVideo","next","bind","currentSrc","controls","loop","volume","tagName","attr","height","parent","keyCode","previous","show","getScroll","scroll","stopMedia","media","pause","currentTime","playMedia","load","docEl","documentElement","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","eventListeners","main","getElementById","section","createElement","setAttribute","povLogo","innerHTML","appendChild","playButton","get","id","stop","animate","scrollLeft","top","find","each","originalEvent","touches","clientX","clientY","mainScroll","x","y","abs","scrollTop","changedTouches","swipe","removeClass","removeAttr","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/**\n * Copyright (c) POV | American Documentary\n * Asset Manager code is heavily modified from orignal source to expend from just managing image to managing video and audio.\n *\n * html5rocks.com Copyright (c)\n * Except as otherwise [noted](http://code.google.com/policies.html#restrictions), the content of this page is licensed under the [Creative Commons Attribution 3.0 License](http://creativecommons.org/licenses/by/3.0/), and code samples are licensed under the [Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0).\n * createCORSRequest is Copyright (c) html5rocks.com (http://www.html5rocks.com/en/tutorials/cors/)\n * Asset Manager is Copyright (c) html5rocks.com (http://www.html5rocks.com/en/tutorials/games/assetmanager/)\n */\n\n/**\n * Using CORS\n * source: http://www.html5rocks.com/en/tutorials/cors/\n */\nfunction createCORSRequest(method, url) {\n  var xhr = new XMLHttpRequest();\n  if (\"withCredentials\" in xhr) {\n    // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n    // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n    xhr.open(method, url, true);\n  }\n  else if (typeof XDomainRequest != \"undefined\") {\n    // Otherwise, check if XDomainRequest.\n    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n    xhr = new XDomainRequest();\n    xhr.open(method, url);\n  }\n  else {\n    // Otherwise, CORS is not supported by the browser.\n    xhr = null;\n  }\n  return xhr;\n}\n\n\n/**\n * Simple Asset Management for HTML5 Games\n * Source: http://www.html5rocks.com/en/tutorials/games/assetmanager/\n * This code is heavily modified from orignal source to expend from just managing image to managing video and audio.\n */\nfunction AssetManager() {\n  this.DEBUG = false;\n  this.successCount = 0;\n  this.errorCount = 0;\n  this.cache = {};\n  this.downloadQueue = [];\n  this.inQueue = {};\n}\n\nAssetManager.prototype.queueDownload = function(path) {\n  this.downloadQueue.push(path);\n};\n\nAssetManager.prototype.constructor = function(queue, downloadCallback) {\n  if(typeof queue!==\"undefined\") this.downloadQueue = queue;\n  if (this.downloadQueue.length === 0 && typeof downloadCallback!==\"undefined\") downloadCallback();\n  var parentThis = this;\n  for (var i = 0; i < this.downloadQueue.length; i++) {\n    var obj = this.downloadQueue[i];\n    // skip if the asset is already downloaded\n    // if(this.getAsset(obj.path)!=\"undefined\") continue;\n\n    if(obj.type=='image'){\n      this.downloadImage(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else if(obj.type=='audio'){\n      this.downloadAudio(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else if(obj.type=='video'){\n      this.downloadVideo(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else continue;\n  }\n};\n\nAssetManager.prototype.downloadImage = function(path, downloadCallback){\n  var image      = new Image();\n  var parentThis = this;\n  if(parentThis.DEBUG) console.log(\"IMAGE DOWNLOADING: \", path);\n\n  image.addEventListener(\"progress\", function (event) {\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n  image.addEventListener(\"load\", function() {\n    parentThis.successCount += 1;\n    if(parentThis.DEBUG) console.log(\"IMAGE DOWNLOADED: \", path);\n    downloadCallback(path, image);\n  }, false);\n  image.addEventListener(\"error\", function(e) {\n    parentThis.errorCount += 1;\n    if(parentThis.DEBUG) console.error(\"ERROR DOWNLOADING IMAGE: \", path, e);\n  }, false);\n  image.src = path;\n};\n\nAssetManager.prototype.downloadAudio = function(path, downloadCallback){\n  var audio      = new Audio();\n  var parentThis = this;\n  var xhr        = createCORSRequest('GET', path);\n  \n  if (!xhr) throw new Error('CORS not supported');\n  if(parentThis.DEBUG) console.log(\"AUDIO DOWNLOADING: \", path);\n\n  xhr.responseType = 'blob';\n\n  xhr.addEventListener(\"progress\", function (event) {\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n  xhr.addEventListener(\"load\", function() {\n    if(parentThis.DEBUG) console.log(\"AUDIO DOWNLOADED: \", path);\n    parentThis.successCount += 1;\n    window.URL = window.URL || window.webkitURL;\n    audio = window.URL.createObjectURL(this.response);\n    downloadCallback(path, audio);\n  }, false);\n  xhr.addEventListener(\"error\", function(e) {\n    parentThis.errorCount += 1;\n    if(parentThis.DEBUG) console.error(\"ERROR DOWNLOADING AUDIO: \", path, e);\n  }, false);\n  xhr.send();\n};\n\nAssetManager.prototype.downloadVideo = function(path, downloadCallback){\n  var video      = null;\n  var parentThis = this;\n  var xhr        = createCORSRequest('GET', path);\n  if (!xhr) throw new Error('CORS not supported');\n  if(parentThis.DEBUG) console.log(\"VIDEO DOWNLOADING: \", path);\n\n\txhr.responseType = 'blob';\n\n  xhr.addEventListener(\"progress\", function (event) {\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n\txhr.addEventListener(\"load\", function() {\n    if(parentThis.DEBUG) console.log(\"VIDEO DOWNLOADED: \", path);\n    parentThis.successCount += 1;\n    window.URL = window.URL || window.webkitURL;\n\t\tvideo = window.URL.createObjectURL(this.response);\n    downloadCallback(path, video);\n\t}, false);\n  xhr.addEventListener(\"error\", function(e) {\n    parentThis.errorCount += 1;\n    if(parentThis.DEBUG) console.error(\"ERROR DOWNLOADING VIDEO: \", path, e);\n  }, false);\n\txhr.send();\n};\n\nAssetManager.prototype.isDone = function() {\n  return (this.progress()<100) ? false : true;\n};\n\nAssetManager.prototype.progress = function() {\n  var progress = 0;\n  var total    = 0;\n\n  for (var key in this.inQueue){\n    if(this.inQueue.hasOwnProperty(key)){\n      progress += this.inQueue[key].progress;\n      total    += this.inQueue[key].total;\n    }\n  }\n\n  return Math.round((progress / total) * 100);\n};\n\nAssetManager.prototype.getAsset = function(path) {\n  if(!this.cache.hasOwnProperty(path)) return path;\n  else return this.cache[path];\n};\n\nAssetManager.prototype.updateProgress = function(path, oEvent) {\n  if (oEvent.lengthComputable) {\n    var percentComplete = oEvent.loaded / oEvent.total;\n    if(parentThis.DEBUG) console.log(path, percentComplete);\n  } else {\n  }\n};\n\nAssetManager.prototype.progressCount = function(path, loaded, total){\n  this.inQueue[path] = {progress: event.loaded, total: event.total};\n};","var app = {\n  DEBUG:           false,\n  snapFile:        'assets/snap.json',\n  assetManager:    new AssetManager(),\n  touchX:          null,\n  touchY:          null,\n  currentScroll:   0,\n  currentSnap:     0,\n  assets:          [],\n  allAssets:       [],\n  data:            [],\n  snaps:           [],\n  startedTF:       false,\n  loadedTF:        false,\n  title:           document.title,\n  width:           $('main').width(),\n  swipeThreshold:  6,\n  cacheCover:      true,\n  casheContent:    true,\n  touchThreshold:  40,\n  transitionSpeed: 600,\n\n  init: function () {\n    app.assetManager.DEBUG = app.DEBUG;\n    app.readFile(app.downloadAssets);\n    if(window.ui){\n      var os = window.ui.os.replace(/\\s/g, \"\");\n      $('body').addClass(os.toLowerCase());\n      $('body').addClass(window.ui.browser.toLowerCase());\n    }\n\n    if((\"standalone\" in window.navigator) && window.navigator.standalone){\n      $('body').addClass('fullscreen');\n    }\n  },\n\n  readFile: function(callback){\n    $.getJSON(app.snapFile, function(data){\n      app.data = data;\n      for (var i = 0, d = null, l = data.length; i < l; i++) {\n        d = data[i];\n        if(d.cover && app.cacheCover){\n          if(d.cover.image) app.addAssetManager('image', d.cover.image);\n          if(d.cover.audio) app.addAssetManager('audio', d.cover.audio);\n          if(d.cover.video) app.addAssetManager('video', d.cover.video);\n        }\n        if(d.content && app.casheContent){\n          if(d.content.type=='video') app.addAssetManager('video', d.content.src);\n        }\n        if(i==l-1) callback();\n      }\n    });\n  },\n\n  addAssetManager: function (type, path) {\n    var index = app.assets.indexOf(path);\n    if(index<0){\n      app.allAssets.push({'type': type, 'path': path});\n      app.assets.push(path);\n      return app.allAssets.length - 1;\n    }\n    return index;\n  },\n\n  downloadAssets: function (){\n\n    app.assetManager.constructor(app.allAssets, function(){\n      for (var i = 0, d = null, l = app.data.length; i < l; i++) {\n        d = app.data[i];\n        if(d.cover && app.cacheCover){\n          if(d.cover.audio) d.cover.audio = app.assetManager.getAsset(d.cover.audio);\n          if(d.cover.video) d.cover.video = app.assetManager.getAsset(d.cover.video);\n        }\n        if(d.content && app.casheContent){\n          if(d.content.type=='video') d.content.src = app.assetManager.getAsset(d.content.src);\n        }\n      }\n      app.start();\n    });\n\n\n    // update progress bar on screen\n    var progressState = setInterval(function() {\n      var progress = app.assetManager.progress();\n      if (progress<100) {\n        $('#progress-bar').css({'width': progress+'%'});\n        document.title = progress+'% | '+app.title;\n      }else{\n        clearInterval(progressState);\n        document.title = app.title;\n      }\n    }, 1000);\n  },\n\n  start: function () {\n    if(!app.loadedTF){\n      for (var i = 0, l = app.data.length; i < l; i++) {\n        app.snap.create(i, app.data[i]);\n        if(i==l-1) app.loadedTF = true;\n      }\n    }\n    var time = setInterval(function(){\n      if(app.loadedTF){\n        $('#launcher').hide();\n        app.eventListener();\n        app.snap.init();\n        app.snap.play(app.snap.getCurrent());\n        clearInterval(time);\n      }\n    }, 1000);\n  },\n\n  eventListener: function () {\n\n    $(document).on('touchmove', function(event){\n      var snap = app.snap.getCurrent();\n      if(!$(snap.content).hasClass('html')) event.preventDefault();\n    });\n\n    // start snap story\n    $('#intro-play').on('click', function () {\n      if(!app.startedTF){\n        app.toggleFullScreen();\n        app.startedTF = true;\n        for (var i = 0, snap = null, l = app.snaps.length; i < l; i++) {\n          snap = app.snaps[i];\n          if(snap.video) app.preload(snap.video);\n          if(snap.audio) app.preload(snap.audio);\n          if(snap.contentVideo) app.preload(snap.contentVideo);\n        }\n      }\n      app.snap.next();\n    });\n\n    $('video,audio').bind('abort', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'abort function fired');\n      this.controls = true;\n    }).bind('emptied', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'emptied function fired');\n      this.controls = true;\n    }).bind('error', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'error function fired');\n      this.controls = true;\n    }).bind('stalled', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'stalled function fired');\n      this.controls = true;\n    }).bind('ended', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'ended function fired');\n      if(!this.loop) this.controls = true;\n    }).bind('pause', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'pause function fired');\n      this.volume      = 0;\n    }).bind('play', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'play function fired');\n      this.volume      = 1;\n      if(this.tagName && this.tagName===\"VIDEO\" && $('body').hasClass('safari') && $('body').hasClass('ios')){\n        $(this).attr('style', 'height: '+$('main').height()+'px');\n      }\n    }).bind('playing', function(e){\n      if(app.DEBUG) console.log(this.currentSrc, 'playing function fired');\n      if($(this).parent().hasClass('snap-cover')) this.controls = false;\n    });\n\n    // navigate using keyboard\n    $(document).on('keydown', function(event){\n      // left key\n      if(event.keyCode==37) app.snap.previous();\n      // up key\n      else if(event.keyCode==38) app.snap.cover.show(true);\n      // right key\n      else if(event.keyCode==39) app.snap.next();\n      // down key\n      else if(event.keyCode==40) app.snap.content.show();\n    });\n  },\n\n  getScroll: function () {\n    var scroll = app.currentScroll;\n    var width  = $('main').width();\n    scroll = (scroll<0) ? 0 : scroll;\n    if((scroll % width) !== 0) scroll = scroll - (scroll % width);\n    return scroll;\n  },\n\n  stopMedia: function (media) {\n    if(!media) return false;\n    media.pause();\n    media.currentTime = 0;\n  },\n\n  playMedia: function (media) {\n    if(!media) return false;\n    media.play();\n  },\n\n  preload: function (media) {\n    if(!media) return false;\n    media.load();\n    media.play();\n    media.pause();\n    media.currentTime = 0;\n  },\n\n  toggleFullScreen: function () {\n    var docEl = document.documentElement;\n    if(!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {\n           if(docEl.requestFullscreen)       { docEl.requestFullscreen(); }\n      else if(docEl.msRequestFullscreen)     { docEl.msRequestFullscreen(); }\n      else if(docEl.mozRequestFullScreen)    { docEl.mozRequestFullScreen(); }\n      else if(docEl.webkitRequestFullscreen) { docEl.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT); }\n      else{}\n    } else {\n           if (document.exitFullscreen)      { document.exitFullscreen(); }\n      else if(document.msExitFullscreen)     { document.msExitFullscreen(); }\n      else if(document.mozCancelFullScreen)  { document.mozCancelFullScreen(); }\n      else if(document.webkitExitFullscreen) { document.webkitExitFullscreen(); }\n      else{}\n    }\n  },\n};","app.snap = {\n\n  init: function () {\n    app.snap.cover.eventListeners();\n    app.snap.content.eventListeners();\n  },\n\n  create: function (i, snap) {\n    var main = document.getElementById('main');\n    var section = '';\n    var obj = {\n      video: null,\n      audio: null,\n      image: null,\n      cover: null,\n      content: null,\n      contentVideo: null\n    };\n    section = document.createElement('section');\n    section.setAttribute('class', (i===0) ? 'intro' : 'snap');\n    section.setAttribute('id', 'snap'+i);\n\n    if(i===0){\n\n      if(snap.cover.image){\n        section.setAttribute('style', \"background-image: url('\"+snap.cover.image+\"')\");\n      }else{\n        var povLogo = document.createElement('img');\n        povLogo.setAttribute('src', 'assets/media/pov-logo-web-transparent-bg-white-text.svg');\n        povLogo.setAttribute('alt', 'POV Logo');\n        povLogo.setAttribute('width', '200');\n        povLogo.setAttribute('height', 'auto');\n        povLogo.setAttribute('class', 'intro-pov-logo');\n\n        var title = document.createElement('h1');\n        title.setAttribute('class', 'intro-title');\n        title.innerHTML = \"Mobile Story Telling\";\n\n        section.appendChild(povLogo);\n        section.appendChild(title);\n      }\n      var playButton = document.createElement('button');\n      playButton.setAttribute('type', 'button');\n      playButton.setAttribute('id', 'intro-play');\n      playButton.setAttribute('class', 'intro-play-btn');\n      playButton.innerHTML = \"Start\";\n\n      section.appendChild(playButton);\n    }else{\n\n      // cover\n      var cover = document.createElement('div');\n      cover.setAttribute('class', 'snap-cover');\n      // add cover content\n      if(snap.cover.video){\n        var video = document.createElement('video');\n        video.setAttribute('playsinline', true);\n        video.setAttribute('webkit-playsinline', true);\n        video.setAttribute('src', snap.cover.video);\n        video.setAttribute('preload', 'metadata');\n        video.setAttribute('loop', true);\n        video.setAttribute('controls', false);\n        video.setAttribute('class', 'snap-cover-video');\n        cover.appendChild(video);\n        obj.video = video;\n      }else{\n        if(snap.cover.image){\n          var image = document.createElement('img');\n          image.setAttribute('src', snap.cover.image);\n          image.setAttribute('alt', '');\n          image.setAttribute('width', '100%');\n          image.setAttribute('height', '');\n          image.setAttribute('class', 'snap-cover-image');\n          cover.appendChild(image);\n          obj.image = image;\n        }\n        if(snap.cover.audio){\n          var audio = document.createElement('audio');\n          audio.setAttribute('src', snap.cover.audio);\n          audio.setAttribute('preload', 'metadata');\n          audio.setAttribute('loop', true);\n          audio.setAttribute('controls', false);\n          audio.setAttribute('class', 'snap-cover-audio');\n          cover.appendChild(audio);\n          obj.audio = audio;\n        }\n      }\n      section.appendChild(cover);\n      obj.cover = cover;\n\n      // content\n      if(i>0 && snap.content.type!=='' && snap.content.src!==''){\n        var content = document.createElement('article');\n        content.setAttribute('class', 'snap-content '+snap.content.type);\n        // add html content to snap\n        if(snap.content.type=='html'){\n          content.innerHTML = snap.content.src;\n        }\n        if(snap.content.type=='video'){\n          var contentVideo = document.createElement('video');\n          contentVideo.setAttribute('playsinline', true);\n          contentVideo.setAttribute('webkit-playsinline', true);\n          contentVideo.setAttribute('src', snap.content.src);\n          contentVideo.setAttribute('preload', 'metadata');\n          contentVideo.setAttribute('loop', false);\n          contentVideo.setAttribute('controls', true);\n          contentVideo.setAttribute('class', 'snap-content-video');\n          content.appendChild(contentVideo);\n          obj.contentVideo = contentVideo;\n        }\n        section.appendChild(content);\n        if(snap.content.type){\n          $(section).addClass('content-more');\n          $(section).addClass(snap.content.type);\n        }\n        obj.content = content;\n      }\n    }\n    main.appendChild(section);\n    app.snaps.push(obj);\n  },\n\n  getCurrent: function () {\n    if(app.currentSnap<0) app.currentSnap = 0;\n    return app.snap.get(app.currentSnap);\n  },\n\n  get: function (id) {\n    // change the index and return the snap object\n    if(id<0 || id>app.snaps.length) return null;\n    return app.snaps[id];\n  },\n\n  next: function () {\n    var width   = app.width;\n    var section = $('section.snap').length;\n    var scroll  = app.getScroll() + width;\n    app.snap.cover.show(false);\n    if(scroll<=(width*section)){\n      $('main').stop().animate({\n        scrollLeft: scroll\n      }, app.transitionSpeed, function(){\n        var id = (scroll/width);\n        app.currentScroll = scroll;\n        app.currentSnap   = id;\n        app.snap.stop(app.snap.get(id-1));\n        app.snap.play(app.snap.get(id));\n      });\n    }\n  },\n\n  previous: function () {\n    var width  = app.width;\n    var scroll = app.getScroll() - width;\n    app.snap.cover.show(false);\n    if(scroll>=0){\n      $('main').stop().animate({\n        scrollLeft: scroll\n      }, app.transitionSpeed, function(){\n        var id = (scroll/width);\n        app.currentScroll = scroll;\n        app.currentSnap   = id;\n        app.snap.stop(app.snap.get(id+1));\n        app.snap.play(app.snap.get(id));\n      });\n    }\n  },\n\n  play: function (snap) {\n    if(!snap) return false;\n    if(snap.video) app.playMedia(snap.video);\n    else if(snap.audio) app.playMedia(snap.audio);\n  },\n\n  stop: function (snap) {\n    if(!snap) return false;\n    if(snap.video) app.stopMedia(snap.video);\n    else if(snap.audio) app.stopMedia(snap.audio);\n  },\n\n  content: {\n    show: function () {\n      var snap = app.snap.getCurrent();\n      if(!snap.content || $(snap.cover).hasClass('over')) return false;\n      $(snap.cover).animate({\n        top: '-110%'\n      }, app.transitionSpeed, function(){\n        $(this).addClass('over');\n      });\n      app.snap.stop(snap);\n      if(snap.contentVideo) app.playMedia(snap.contentVideo);\n    },\n\n    stop: function (snap) {\n      if(!snap) snap = app.snap.getCurrent();\n      if(!snap.content) return false;\n      // stop all the video and audio in the content\n      $(snap.content).find('video,audio').each(function(){\n        app.stopMedia(this);\n      });\n    },\n\n    eventListeners: function () {\n      $('.snap-content').on('touchstart', function(event){\n        if(!app.startedTF) return;\n        app.touchX = event.originalEvent.touches[0].clientX;\n        app.touchY = event.originalEvent.touches[0].clientY;\n        app.mainScroll = app.getScroll();\n      })\n      .on('touchmove', function(event){\n        if(!app.touchX && !app.touchY) return;\n        var x = app.touchX - event.originalEvent.touches[0].clientX;\n        var y = app.touchY - event.originalEvent.touches[0].clientY;\n        \n        if(Math.abs(x) > Math.abs(y)){\n          // scroll main as user moves from left to right\n          $('main').scrollLeft(app.getScroll() + x);\n        }else{\n          var snap = app.snap.getCurrent();\n          if(snap.content && $(snap.cover).hasClass('over') && y<0 && $(snap.content).scrollTop()===0){\n            y = ((y + $('main').height())/$('main').height()) * 100;\n            $(snap.cover).css({'top': (y * -1)+'%'});\n          }\n        }\n      })\n      .on('touchend', function(event){\n        if(!app.touchX && !app.touchY) return;\n        var x      = app.touchX - event.originalEvent.changedTouches[0].clientX;\n        var y      = app.touchY - event.originalEvent.changedTouches[0].clientY;\n        console.log(x, y, app.touchX, app.touchY, event.originalEvent.changedTouches[0].clientX, event.originalEvent.changedTouches[0].clientY);\n        app.touchX = null;\n        app.touchY = null;\n        // reset the main scroll\n        if(Math.abs(x)<app.touchThreshold){\n          $('main').scrollLeft(app.mainScroll);\n        }\n\n        app.mainScroll = null;\n        app.snap.content.swipe(x, y, $(this).scrollTop());\n      });\n    },\n\n    swipe: function (x, y, top) {\n      if(!x || !y) return;\n      if(Math.abs(x) > Math.abs(y)){\n        if(x < 0){\n          // left swipe\n          if(x < -Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('content swipe left');\n            app.snap.previous();\n          }\n        }else{\n          // right swipe\n          if(x > Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('content swipe right');\n            app.snap.next();\n          }\n        }\n      }else{\n        if(y < 0){\n          // up swipe\n          if(y < -Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('content swipe up');\n            if(top<2) app.snap.cover.show(true);\n          }\n        }else{\n          // down swipe\n          if(y > Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('content swipe down');\n          }\n        }\n      }\n    }\n  },\n\n\n\n\n  // Cover Snap Functions\n  cover: {\n    show: function (play) {\n      var snap = app.snap.getCurrent();\n      if(!$(snap.cover).hasClass('over')) return;\n      if(!snap.content){\n        $(snap.cover).removeAttr('style').removeClass('over');\n      }else{\n        // stop any media playing in the content\n        app.snap.content.stop(snap);\n        // reset content scroll to zero\n        $(snap.content).stop().animate({\n          scrollTop: 0\n        }, app.transitionSpeed);\n        // bring the cover down\n        $(snap.cover).animate({\n          top: '0%'\n        }, app.transitionSpeed, function(){\n          $(this).removeClass('over').removeAttr('style');\n        });\n      }\n      console.log('show cover: ',play);\n      if(play===true) app.snap.play(snap);\n    },\n\n    eventListeners: function () {\n      $('.snap-cover').on('touchstart', function(event){\n        if(!app.startedTF) return;\n        app.touchX = event.originalEvent.touches[0].clientX;\n        app.touchY = event.originalEvent.touches[0].clientY;\n        app.mainScroll = app.getScroll();\n      })\n      .on('touchmove', function(event){\n        if(!app.touchX || !app.touchY) return;\n        var x = app.touchX - event.originalEvent.touches[0].clientX;\n        var y = app.touchY - event.originalEvent.touches[0].clientY;\n        \n        if(Math.abs(x) > Math.abs(y)){\n          // scroll main as user moves from left to right\n          $('main').scrollLeft(app.getScroll() + x);\n        }else{\n          var snap = app.snap.getCurrent();\n          if(snap.content && !$(snap.cover).hasClass('over') && y>0){\n            y = (y/$('main').height()) * 100;\n            $(snap.cover).css({'top': (y * -1)+'%'});\n          }\n        }\n        event.preventDefault();\n      })\n      .on('touchend', function(event){\n        if(!app.touchX && !app.touchY) return;\n        var x      = app.touchX - event.originalEvent.changedTouches[0].clientX;\n        var y      = app.touchY - event.originalEvent.changedTouches[0].clientY;\n        console.log(x, y, app.touchX, app.touchY, event.originalEvent.changedTouches[0].clientX, event.originalEvent.changedTouches[0].clientY);\n        app.touchX = null;\n        app.touchY = null;\n        //\n        if(Math.abs(x)<app.touchThreshold){\n          $('main').scrollLeft(app.mainScroll);\n        }\n        //\n        if(Math.abs(y)<app.touchThreshold){\n          var snap = app.snap.getCurrent();\n          $(snap.cover).animate({\n            top: '0%'\n          }, app.transitionSpeed, function(){\n            $(this).removeAttr('style').removeClass('over');\n          });\n        }\n        app.mainScroll = null;\n        app.snap.cover.swipe(x, y);\n      });\n    },\n\n    swipe: function (x, y) {\n      if(!x && !y) return;\n      console.log(x, y);\n      if(Math.abs(x) > Math.abs(y)){\n        if(x < 0){\n          // left swipe\n          if(x < -Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('swipe left');\n            app.snap.previous();\n          }\n        }else{\n          // right swipe\n          if(x > Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('swipe right');\n            app.snap.next();\n          }\n        }\n      }else{\n        if(y < 0){\n          // up swipe\n          if(y < -Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('swipe up');\n          }\n        }else{\n          // down swipe\n          if(y > Math.abs(app.swipeThreshold)){\n            if(app.DEBUG) console.log('swipe down');\n            app.snap.content.show();\n          }\n        }\n      }\n    }\n  }\n};","$(document).ready(function(){\n  app.init();\n});"],"sourceRoot":"/source/"}