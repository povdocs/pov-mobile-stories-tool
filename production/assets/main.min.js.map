{"version":3,"sources":["0.assetManager.js","1.app.js","2.snap.js","9.main.js"],"names":["createCORSRequest","method","url","xhr","XMLHttpRequest","open","XDomainRequest","AssetManager","this","DEBUG","successCount","errorCount","cache","downloadQueue","inQueue","prototype","queueDownload","path","push","constructor","queue","downloadCallback","length","parentThis","i","obj","type","downloadImage","result","isDone","downloadAudio","downloadVideo","image","Image","console","log","addEventListener","event","progressCount","loaded","total","src","audio","Audio","error","muted","volume","autoplay","video","Error","responseType","window","URL","webkitURL","createObjectURL","response","send","progress","key","hasOwnProperty","Math","round","getAsset","updateProgress","oEvent","lengthComputable","percentComplete","assetManager","app","snapFile","touchX","touchY","currentScroll","currentSnap","assets","allAssets","snaps","started","title","document","width","$","init","readFile","start","setTimeout","eventListener","downloadAssets","snap","getJSON","l","create","index","on","toggleFullScreen","playMedia","stopMedia","next","keyCode","previous","cover","show","content","addAssetManager","indexOf","progressState","setInterval","css","clearInterval","asset","each","get","children","attr","hide","play","getCurrent","getScroll","scroll","media","animate","pause","currentTime","prop","sound","docEl","documentElement","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","eventListeners","section","append","appendTo","html","addClass","id","stop","scrollLeft","find","clientX","clientY","x","y","swipe","scrollTop","originalEvent","touches","top","abs","hasClass","removeClass","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/**\n * Copyright (c) POV | American Documentary\n * Asset Manager code is heavily modified from orignal source to expend from just managing image to managing video and audio.\n *\n * html5rocks.com Copyright (c)\n * Except as otherwise [noted](http://code.google.com/policies.html#restrictions), the content of this page is licensed under the [Creative Commons Attribution 3.0 License](http://creativecommons.org/licenses/by/3.0/), and code samples are licensed under the [Apache 2.0 License](http://www.apache.org/licenses/LICENSE-2.0).\n * createCORSRequest is Copyright (c) html5rocks.com (http://www.html5rocks.com/en/tutorials/cors/)\n * Asset Manager is Copyright (c) html5rocks.com (http://www.html5rocks.com/en/tutorials/games/assetmanager/)\n */\n\n/**\n * Using CORS\n * source: http://www.html5rocks.com/en/tutorials/cors/\n */\nfunction createCORSRequest(method, url) {\n  var xhr = new XMLHttpRequest();\n  if (\"withCredentials\" in xhr) {\n    // Check if the XMLHttpRequest object has a \"withCredentials\" property.\n    // \"withCredentials\" only exists on XMLHTTPRequest2 objects.\n    xhr.open(method, url, true);\n  }\n  else if (typeof XDomainRequest != \"undefined\") {\n    // Otherwise, check if XDomainRequest.\n    // XDomainRequest only exists in IE, and is IE's way of making CORS requests.\n    xhr = new XDomainRequest();\n    xhr.open(method, url);\n  }\n  else {\n    // Otherwise, CORS is not supported by the browser.\n    xhr = null;\n  }\n  return xhr;\n}\n\n\n/**\n * Simple Asset Management for HTML5 Games\n * Source: http://www.html5rocks.com/en/tutorials/games/assetmanager/\n * This code is heavily modified from orignal source to expend from just managing image to managing video and audio.\n */\nfunction AssetManager() {\n  this.DEBUG = true;\n  this.successCount = 0;\n  this.errorCount = 0;\n  this.cache = {};\n  this.downloadQueue = [];\n  this.inQueue = {};\n}\n\nAssetManager.prototype.queueDownload = function(path) {\n  this.downloadQueue.push(path);\n}\n\nAssetManager.prototype.constructor = function(queue, downloadCallback) {\n  if(typeof queue!==\"undefined\") this.downloadQueue = queue;\n  if (this.downloadQueue.length === 0 && typeof downloadCallback!==\"undefined\") downloadCallback();\n  var parentThis = this;\n  for (var i = 0; i < this.downloadQueue.length; i++) {\n    var obj = this.downloadQueue[i];\n    // skip if the asset is already downloaded\n    // if(this.getAsset(obj.path)!=\"undefined\") continue;\n\n    if(obj.type=='image'){\n      this.downloadImage(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else if(obj.type=='audio'){\n      this.downloadAudio(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else if(obj.type=='video'){\n      this.downloadVideo(obj.path, function(path, result){\n        parentThis.cache[path] = result;\n        if(parentThis.isDone()) downloadCallback();\n      });\n    }\n    else continue;\n  }\n}\n\nAssetManager.prototype.downloadImage = function(path, downloadCallback){\n  var image      = new Image();\n  var parentThis = this;\n  if(parentThis.DEBUG) console.log(\"IMAGE DOWNLOADING: \", path);\n\n  image.addEventListener(\"progress\", function (event) {\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n  image.addEventListener(\"load\", function() {\n    parentThis.successCount += 1;\n    if(parentThis.DEBUG) console.log(\"IMAGE DOWNLOADED: \", path);\n    downloadCallback(path, image);\n  }, false);\n  image.addEventListener(\"error\", function() {\n    parentThis.errorCount += 1;\n  }, false);\n  image.src = path;\n}\n\nAssetManager.prototype.downloadAudio = function(path, downloadCallback){\n  var audio      = new Audio();\n  var parentThis = this;\n  if(parentThis.DEBUG) console.log(\"AUDIO DOWNLOADING: \", path);\n  audio.addEventListener(\"progress\", function (event) {\n    if(parentThis.DEBUG) console.log('AUDIO progress: ', path, event);\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n  audio.addEventListener(\"load\", function() {\n    if(parentThis.DEBUG) console.log('AUDIO DOWNLOADED: ', path);\n    parentThis.successCount += 1;\n    downloadCallback(path, audio);\n  }, false);\n  audio.addEventListener(\"error\", function() {\n    if(parentThis.DEBUG) console.error('AUDIO: ', path);\n    parentThis.errorCount += 1;\n  }, false);\n  audio.src = path;\n  audio.muted = true;\n  audio.volume = 0;\n  audio.autoplay = false;\n}\n\nAssetManager.prototype.downloadVideo = function(path, downloadCallback){\n  var video      = null;\n  var parentThis = this;\n  var xhr        = createCORSRequest('GET', path);\n  if (!xhr) throw new Error('CORS not supported');\n  if(parentThis.DEBUG) console.log(\"VIDEO DOWNLOADING: \", path);\n\n\txhr.responseType = 'blob';\n\n  xhr.addEventListener(\"progress\", function (event) {\n    parentThis.progressCount(path, event.loaded, event.total);\n  });\n\txhr.addEventListener(\"load\", function() {\n    if(parentThis.DEBUG) console.log(\"VIDEO DOWNLOADED: \", path);\n    parentThis.successCount += 1;\n    window.URL = window.URL || window.webkitURL;\n\t\tvideo = window.URL.createObjectURL(this.response);\n    downloadCallback(path, video);\n\t}, false);\n  xhr.addEventListener(\"error\", function() {\n    parentThis.errorCount += 1;\n  }, false);\n\txhr.send();\n}\n\nAssetManager.prototype.isDone = function() {\n  return (this.progress()<100) ? false : true;\n}\n\nAssetManager.prototype.progress = function() {\n  var progress = 0;\n  var total    = 0;\n\n  for (var key in this.inQueue){\n    if(this.inQueue.hasOwnProperty(key)){\n      progress += this.inQueue[key].progress;\n      total    += this.inQueue[key].total;\n    }\n  }\n\n  return Math.round((progress / total) * 100);\n}\n\nAssetManager.prototype.getAsset = function(path) {\n  if(!this.cache.hasOwnProperty(path)) return path;\n  else return this.cache[path];\n}\n\nAssetManager.prototype.updateProgress = function(path, oEvent) {\n  if (oEvent.lengthComputable) {\n    var percentComplete = oEvent.loaded / oEvent.total;\n    if(parentThis.DEBUG) console.log(path, percentComplete);\n  } else {\n  }\n}\nAssetManager.prototype.progressCount = function(path, loaded, total){\n  this.inQueue[path] = {progress: event.loaded, total: event.total};\n}","var assetManager = new AssetManager();\n\nvar app = {\n  DEBUG:         true,\n  snapFile:      'assets/snap.json',\n  touchX:        null,\n  touchY:        null,\n  video:         null,\n  audio:         null,\n  currentScroll: 0,\n  currentSnap:   0,\n  assets:        [],\n  allAssets:     [],\n  snaps:         [],\n  started:       false,\n  title:         document.title,\n  width:         $('main').width(),\n\n  init: function () {\n    app.readFile();\n    app.start();\n  },\n\n  start: function () {\n    setTimeout(function(){\n      app.eventListener();\n      app.downloadAssets();\n      app.snap.init();\n    }, 1000);\n  },\n\n  readFile: function(){\n    $.getJSON(app.snapFile, function(snaps){\n      for (var i = 0, l = snaps.length; i < l; i++) {\n        app.snap.create(i, snaps[i]);\n        app.snap.index(i);\n      }\n    });\n  },\n\n  eventListener: function () {\n    // start snap story\n    $('#snap0,.intro').on('click', function () {\n      if(app.DEBUG) console.log('intro click.');\n      if(!app.started){\n        app.toggleFullScreen();\n        app.started = true;\n        for (var i = 0, l = app.snaps.length; i < l; i++) {\n          var snap = app.snaps[i];\n          if(snap.video.length){\n            app.playMedia(snap.video, false);\n            setTimeout(function(){app.stopMedia(snap.video);}, 5000);\n          }\n          if(snap.audio.length){\n            app.playMedia(snap.audio, false);\n            setTimeout(function(){app.stopMedia(snap.audio);}, 5000);\n          }\n        }\n      }\n      app.snap.next();\n    });\n\n    // navigate using keyboard\n    $(document).on('keydown', function(event){\n      // left key\n      if(event.keyCode==37) app.snap.previous();\n      // up key\n      else if(event.keyCode==38) app.snap.cover.show(true);\n      // right key\n      else if(event.keyCode==39) app.snap.next();\n      // down key\n      else if(event.keyCode==40) app.snap.content.show();\n    }).on('touchstart', function(event){\n      // event.preventDefault();\n    }).on('touchmove', function(event){\n      // event.preventDefault();\n    }).on('touchend', function(event){\n      // event.preventDefault();\n    });\n  },\n\n  addAssetManager: function (type, path) {\n    var index = app.assets.indexOf(path);\n    if(index<0){\n      app.allAssets.push({'type': type, 'path': path});\n      app.assets.push(path);\n      return app.allAssets.length - 1;\n    }\n    return index;\n  },\n\n  downloadAssets: function (){\n\n    // update progress bar on screen\n    var progressState = setInterval(function() {\n      var progress = assetManager.progress();\n      if (progress<100) {\n        $('#progress-bar').css({'width': progress+'%'});\n        document.title = progress+'% | '+app.title;\n      }else{\n        clearInterval(progressState);\n        document.title = app.title;\n      }\n    }, 500);\n\n    assetManager.constructor(app.allAssets, function(){\n      for (var i = 0; i < app.allAssets.length; i++) {\n        var asset = app.allAssets[i];\n        var src   = assetManager.getAsset(asset.path);\n        if(asset.type=='audio' || asset.type=='video'){\n          $('[data-asset-id=\"'+i+'\"]').each(function(){\n            $(this).get(0).src = src;\n            $(this).children().get(0).src = src;\n            // $(this).get(0).src = asset.path;\n            // $(this).children().get(0).src = asset.path;\n          });\n        }\n        else if(asset.type=='image'){\n          $('[data-asset-id=\"'+i+'\"]').attr('src', asset.path);\n        }\n        else continue;\n        //  if(DEBUG) console.info(i, asset.path, 'downloaded');\n      }\n      $('#launcher').hide();\n      app.snap.play(app.snap.getCurrent());\n    });\n  },\n\n  getScroll: function () {\n    var scroll = app.currentScroll;\n    var width  = $('main').width();\n    scroll = (scroll<0) ? 0 : scroll;\n    if((scroll % width) !== 0) scroll = scroll - (scroll % width);\n    return scroll;\n  },\n\n  stopMedia: function (media) {\n    if(!media) return false;\n    // console.log(media);\n    media.animate({volume: 0}, 500, function(){\n      media.get(0).pause();\n      media.get(0).currentTime = 0;\n      media.get(0).volume = 0;\n      media.prop('muted', true);\n    });\n  },\n\n  playMedia: function (media, sound) {\n    if(!media) return false;\n    media.prop('muted', ((sound===false) ? true : false));\n    media.get(0).currentTime = 0;\n    media.get(0).volume = 1;\n    media.get(0).play();\n  },\n\n  toggleFullScreen: function () {\n    var docEl = document.documentElement;\n    if (!document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement ) {\n           if(docEl.requestFullscreen)       { docEl.requestFullscreen(); }\n      else if(docEl.msRequestFullscreen)     { docEl.msRequestFullscreen(); }\n      else if(docEl.mozRequestFullScreen)    { docEl.mozRequestFullScreen(); }\n      else if(docEl.webkitRequestFullscreen) { docEl.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT); }\n      else{}\n    } else {\n           if (document.exitFullscreen)      { document.exitFullscreen(); }\n      else if(document.msExitFullscreen)     { document.msExitFullscreen(); }\n      else if(document.mozCancelFullScreen)  { document.mozCancelFullScreen(); }\n      else if(document.webkitExitFullscreen) { document.webkitExitFullscreen(); }\n      else{}\n    }\n  },\n};","app.snap = {\n  init: function () {\n    app.snap.cover.eventListeners();\n    app.snap.content.eventListeners();\n  },\n\n  create: function (i, snap) {\n    var section = '';\n    if(i==0){\n      section = $('<section id=\"snap'+i+'\" class=\"intro\"></section>');\n    }else{\n      section = $('<section id=\"snap'+i+'\" class=\"snap\"></section>');\n    }\n\n    // cover\n    var cover = $('<div class=\"snap-cover\"></div>');\n    // add cover content\n    if(snap.cover.video){\n      cover.append('<video class=\"snap-cover-video\" data-asset-id=\"'+app.addAssetManager('video', snap.cover.video)+'\" loop muted><source src=\"\" type=\"video/mp4\"></video>');\n    }else{\n      if(snap.cover.image){\n        cover.append('<img class=\"snap-cover-image\" data-asset-id=\"'+app.addAssetManager('image', snap.cover.image)+'\" src=\"\" alt=\"\" width=\"100%\" height=\"\">');\n      }\n      if(snap.cover.audio){\n        cover.append('<audio class=\"snap-cover-audio\" loop muted><source src=\"'+snap.cover.audio+'\" type=\"audio/mp3\"></audio>');\n      }\n    }\n    cover.appendTo(section);\n\n    // content\n    if(i>0){\n      var content = $('<div class=\"snap-content\"></div>');\n      // add html content to snap\n      if(snap.content.type=='html'){\n        content.html(snap.content.src);\n      }\n      if(snap.content.type=='video'){\n        content.append('<video class=\"snap-content-video\" data-asset-id=\"'+app.addAssetManager('video', snap.content.src)+'\" controls><source src=\"\" type=\"video/mp4\"></video>');;\n      }\n      content.addClass(snap.content.type);\n      content.appendTo(section);\n    }\n    section.appendTo('main');\n  },\n\n  index: function (i) {\n    var snap = {\n      video: $('#snap'+i+' .snap-cover video'),\n      audio: $('#snap'+i+' .snap-cover audio'),\n      cover: $('#snap'+i+' .snap-cover'),\n      content: $('#snap'+i+' .snap-content')\n    };\n    app.snaps.push(snap);\n  },\n\n  getCurrent: function () {\n    if(app.currentSnap<0) app.currentSnap = 0;\n    return app.snap.get(app.currentSnap);\n  },\n\n  get: function (id) {\n    // change the index and return the snap object\n    if(id<0 || id>app.snaps.length) return null;\n    return app.snaps[id];\n  },\n\n  next: function () {\n    var width   = app.width;\n    var section = $('section.snap').length;\n    var scroll  = app.getScroll() + width;\n    app.snap.cover.show(false);\n    if(scroll<=(width*section)){\n      $('main').stop().animate({\n        scrollLeft: scroll\n      }, 500, function(){\n        var id = scroll/width;\n        app.currentScroll = scroll;\n        app.currentSnap   = id;\n        app.snap.stop(app.snap.get(id-1));\n        app.snap.play(app.snap.get(id));\n      });\n    }\n  },\n\n  previous: function () {\n    var width  = app.width;\n    var scroll = app.getScroll() - width;\n    app.snap.cover.show(false);\n    if(scroll>=0){\n      $('main').stop().animate({\n        scrollLeft: scroll\n      }, 500, function(){\n        var id = scroll/width;\n        app.currentScroll = scroll;\n        app.currentSnap   = id;\n        app.snap.stop(app.snap.get(id+1));\n        app.snap.play(app.snap.get(id));\n      });\n    }\n  },\n\n  play: function (snap) {\n    if(!snap) return false;\n    if(snap.video.length) app.playMedia(snap.video, true);\n    if(snap.audio.length) app.playMedia(snap.audio, true);\n  },\n\n  stop: function (snap) {\n    if(!snap) return false;\n    if(snap.video.length) app.stopMedia(snap.video);\n    if(snap.audio.length) app.stopMedia(snap.audio);\n  },\n\n  content: {\n    show: function () {\n      var snap = app.snap.getCurrent();\n      if(!snap.content.html()) return false;\n      snap.cover.addClass('over');\n      app.snap.stop(snap);\n      if(snap.content.find('.snap-content-video').length){\n        snap.content.find('.snap-content-video').each(function(){\n          $(this).get(0).volume = 1;\n          $(this).prop('muted', false);\n          $(this).get(0).play();\n        });\n      }\n    },\n    stop: function (snap) {\n      if(!snap) snap = app.snap.getCurrent();\n      if(!snap.content.html()) return false;\n      // stop all the video and audio in the content\n      snap.content.find('video,audio').each(function(){\n        var media = $(this);\n        media.animate({volume: 0}, 500, function(){\n          media.get(0).pause();\n          media.get(0).currentTime = 0;\n        });\n      });\n    },\n\n    eventListeners: function () {\n      // $('.snap-content').on('scroll', function(event){\n      //   if($(this).scrollTop()<1){\n      //     app.snap.cover.show();\n      //   }\n      // });\n      $('.snap-content').on('mousedown', function(event){\n        // if(!$(this).hasClass('snap')) return;\n        app.touchX = event.clientX;\n        app.touchY = event.clientY;\n      })\n      .on('mousemove', function(event){\n        if(!app.touchX || !app.touchY) return;\n        var x      = app.touchX - event.clientX;\n        var y      = app.touchY - event.clientY;\n        app.touchX = null;\n        app.touchY = null;\n        app.snap.content.swipe(x, y, $(this).scrollTop());\n      })\n      .on('touchstart', function(event){\n        // if(!$(this).hasClass('snap')) return;\n        app.touchX = event.originalEvent.touches[0].clientX;\n        app.touchY = event.originalEvent.touches[0].clientY;\n      })\n      .on('touchmove', function(event){\n        if(!app.touchX || !app.touchY) return;\n        var x      = app.touchX - event.originalEvent.touches[0].clientX;\n        var y      = app.touchY - event.originalEvent.touches[0].clientY;\n        app.touchX = null;\n        app.touchY = null;\n        app.snap.content.swipe(x, y, $(this).scrollTop());\n      });\n    },\n\n    swipe: function (x, y, top) {\n      if(!x || !y) return;\n      if(Math.abs(x) > Math.abs(y)){\n        if(x < 0){\n          // left swipe\n          if(app.DEBUG) console.log('content swipe left');\n          app.snap.previous();\n        }else{\n          // right swipe\n          if(app.DEBUG) console.log('content swipe right');\n          app.snap.next();\n        }\n      }else{\n        if(y < 0){\n          // up swipe\n          if(app.DEBUG) console.log('content swipe up');\n          if(top<2) app.snap.cover.show(true);\n        }else{\n          // down swipe\n          if(app.DEBUG) console.log('content swipe down');\n        }\n      }\n    }\n  },\n\n\n\n\n  // Cover Snap Functions\n  cover: {\n    show: function (play) {\n      var snap = app.snap.getCurrent();\n      if(!snap.content.html() && snap.cover.hasClass('over')){\n        snap.cover.removeClass('over');\n        if(play===true) app.snap.play(snap);\n      }else{\n        app.snap.content.stop(snap);\n        snap.content.stop().animate({\n          scrollTop: 0\n        }, 500, function(){\n          snap.cover.removeClass('over');\n          if(play===true) app.snap.play(snap);\n        });\n      }\n    },\n\n    eventListeners: function () {\n      $('.snap-cover').on('mousedown', function(event){\n        // if(!$(this).hasClass('snap')) return;\n        app.touchX = event.clientX;\n        app.touchY = event.clientY;\n      })\n      .on('mousemove', function(event){\n        if(!app.touchX || !app.touchY) return;\n        var x      = app.touchX - event.clientX;\n        var y      = app.touchY - event.clientY;\n        app.touchX = null;\n        app.touchY = null;\n        app.snap.cover.swipe(x, y);\n      })\n      .on('touchstart', function(event){\n        // if(!$(this).hasClass('snap')) return;\n        app.touchX = event.originalEvent.touches[0].clientX;\n        app.touchY = event.originalEvent.touches[0].clientY;\n      })\n      .on('touchmove', function(event){\n        if(!app.touchX || !app.touchY) return;\n        var x      = app.touchX - event.originalEvent.touches[0].clientX;\n        var y      = app.touchY - event.originalEvent.touches[0].clientY;\n        app.touchX = null;\n        app.touchY = null;\n        app.snap.cover.swipe(x, y);\n      });\n    },\n\n    swipe: function (x, y) {\n      if(!x || !y) return;\n      if(Math.abs(x) > Math.abs(y)){\n        if(x < 0){\n          // left swipe\n          if(app.DEBUG) console.log('swipe left');\n          app.snap.previous();\n        }else{\n          // right swipe\n          if(app.DEBUG) console.log('swipe right');\n          app.snap.next();\n        }\n      }else{\n        if(y < 0){\n          // up swipe\n          if(app.DEBUG) console.log('swipe up');\n        }else{\n          // down swipe\n          if(app.DEBUG) console.log('swipe down');\n          app.snap.content.show();\n        }\n      }\n    }\n  }\n};","$(document).ready(function(){\n  app.init();\n});"],"sourceRoot":"/source/"}